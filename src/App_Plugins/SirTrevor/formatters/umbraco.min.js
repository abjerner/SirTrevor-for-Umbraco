(function(){var n,t=SirTrevor.Formatter.extend({title:"link",iconName:"link",cmd:"CreateLink",text:"link",onClick:function(){n=this;angular.element("body").injector().get("dialogService").linkPicker({callback:this.onLinkSelected})},isActive:function(){var t=window.getSelection(),n;return t.rangeCount>0&&(n=t.getRangeAt(0).startContainer.parentNode),lastselection=this.saveSelection(),n&&n.nodeName=="A"},onLinkSelected:function(t){var i,r;t.id!=""?(i="/{localLink:"+t.id+"}",r=t.name):(i=t.url,r=t.name);n.restoreSelection(lastselection);i&&i.length>0&&document.execCommand(n.cmd,!1,i)},lastselection:null,saveSelection:function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restoreSelection:function(n){n&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(n)):document.selection&&n.select&&n.select())}});SirTrevor.Formatters.Link=new t})();
/*
//# sourceMappingURL=umbraco.min.js.map
*/